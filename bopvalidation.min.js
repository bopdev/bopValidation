"v0.2.0";!function(t){"use strict";function e(t,e){for(var i in t)if(t.hasOwnProperty(i)&&!1===e.call(t[i],i,t[i]))return!1;return!0}function i(i,n,s,a){var o={capture:!0};a==t?(a=s,s=t,n.addEventListener(i,function(t){return a.call(n,t,{captureElement:n,selector:s})},o)):n.addEventListener(i,function(t){var i=!0;return e(n.querySelectorAll(s),function(){t.target===this&&(i=a.call(this,t,{captureElement:n,selector:s}))}),i},o)}var n="bopValidation";document[n]=function(t){n in t&&(t.setAttribute("novalidate",!0),t[n].promises=[],e(t[n].controller.events,function(s,a){e(a.selectors,function(a,o){for(var r=s.split(" "),l=0;l<r.length;l++)i(r[l],t,a,function(t){var i=t.target;n in i||(i[n]={}),"validity"in i[n]||(i[n].validity={});var s={event:t,selector:a,failures:{},msg:""};i[n].promises=[],e(o.constraints,function(t,e){var a=document[n].resolveConstraint(i,t,e);if(a instanceof Promise){var o=a;o.then(function(a){i[n].validity[t]=a,a&&(s.failures[t]=e,s.msg=e.message)}),i[n].promises.push(o)}else a&&(s.failures[t]=e,!s.msg&&"message"in e&&(s.msg=e.message)),i[n].validity[t]=a}),i[n].promises.length&&Promise.all(i[n].promises).finally(function(){document[n].applyView(i,s)}),document[n].applyView(i,s)})})}),i("submit",t,function(t){var i=this;e(i.querySelectorAll("*"),function(){this.dispatchEvent(new Event("before.submit."+n))}),i[n].promises?(t.preventDefault(),Promise.all(i[n].promises).finally(function(){i.checkValidity()?(i.dispatchEvent(new Event("valid.submit.bopValidation")),i.submit()):i.dispatchEvent(new Event("invalid.submit.bopValidation"))})):this.checkValidity()?this.dispatchEvent(new Event("valid.submit.bopValidation")):(t.preventDefault(),this.dispatchEvent(new Event("invalid.submit.bopValidation")))}))},document[n].resolveConstraint=function(t,e,i){var s=t.form[n].model.constraints,a=!1;return e in s?a=s[e](t,"arguments"in i?i.arguments:{}):"customError"!=e&&"valid"!=e&&"validity"in t&&e in t.validity&&t.validity[e]&&(a=!0),a},document[n].applyView=function(t,e){var i=-1==Object.values(t[n].validity).indexOf(!0),s=Object.keys(e.failures).length,a=e.msg?e.msg:"Invalid.";s?t.setCustomValidity(a):i&&t.setCustomValidity(""),"view"in t.form[n]?i?t.form[n].view.valid(t,e):s&&t.form[n].view.invalid(t,a,e):t.reportValidity()},document[n].promise=function(t,e){var i=new Promise(e);return t[n].promises.push(i),i},i("DOMContentLoaded",document,function(){e(document.getElementsByTagName("form"),function(){document[n](this)})})}();
